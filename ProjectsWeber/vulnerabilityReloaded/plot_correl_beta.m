clear;
% close all;

%blackBody, blackBodyExt, cividis, coolWarmBent, coolWarmSmooth, inferno, jet, kindlmann, kindlmannExt, magma, plasma, viridis
%discrete: lines, prism
% colorMapName = 'grayscale'; 
colorMapName = 'coolWarmSmooth';
colorMap = importdata(['../../Plot/ColorMaps/',colorMapName,'.col']);

 cases= ["villasor","ferto","sanchegy","buk","lovo","nagycenk","vashegy","varis","becsidomb","tomalom",...
    "szakov","kohegy","harka","pozsonyiut","sopronkovesd","dudlesz","ivan","agyagosszergeny","kofejto","simasag",...
    "acsad","csaford","nagylozs","balf","csapod","und","rojtokmuzsaj","brennberg","pusztacsalad","kutyahegy",...
    "nyarliget","meszlen","fertoujlak","gorbehalom","tozeggyarmajor","ebergoc","csillahegy","jerevan","gloriette",...
    "ohermes","ujhermes"];

% cases= ["ferto","sanchegy","lovo","nagycenk","vashegy","varis","becsidomb","tomalom",...
%     "szakov","kohegy","harka","pozsonyiut","sopronkovesd","dudlesz","ivan","agyagosszergeny","kofejto","simasag",...
%     "acsad","csaford","nagylozs","balf","csapod","und","rojtokmuzsaj","brennberg","pusztacsalad","kutyahegy",...
%     "nyarliget","meszlen","fertoujlak","gorbehalom","tozeggyarmajor","ebergoc","csillahegy","jerevan","gloriette",...
%     "ohermes","ujhermes"];

idx = 1:27;

cor_beta_seg = zeros(size(idx));
cor_beta_pipes = zeros(size(idx));
cor_beta_cons = zeros(size(idx));

k=1;
for i=idx
    beta = importdata(join(['Network Data/',cases(i),'/relativeDemandLoss.txt'],''));
    seg = importdata(join(['Network Data/',cases(i),'/sumSegments.txt'],''));
    pipes = importdata(join(['Network Data/',cases(i),'/sumPipes.txt'],''));
    cons = importdata(join(['Network Data/',cases(i),'/sumCons.txt'],''));
    
    cor_beta_seg(i) = corr(beta,seg);
    cor_beta_pipes(i) = corr(beta,pipes);
    cor_beta_cons(i) = corr(beta,cons);
end

% figure();
% plot(delta,beta,'x');
% 
% figure();
% boxplot([cor_beta_1',cor_beta_2',cor_beta_3']);

figure('Position',[1000 200 400 600]);
hm = heatmap([cor_beta_seg',cor_beta_pipes',cor_beta_cons']);
hm.YLabel = 'Index of WDN';
hm.ColorLimits=[-1,1];
hm.Colormap = colorMap(:,2:4);
hm.XDisplayLabels={'Segment','Length','Demand'};
saveas(gca,'Plots/Correlations_beta.fig','fig');
saveas(gca,'Plots/Correlations_beta.png','png');
saveas(gca,'Plots/Correlations_beta.eps','epsc');